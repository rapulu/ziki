{% set title = "Edit Post"%} {% extends 'layout.html' %} {% block page_content
  %}
  <style type="text/css">
    .editor-row {
      margin-bottom: 50px;
    }
  
    .ql-toolbar.ql-snow {
      box-sizing: border-box;
      font-family: 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif;
      padding: 8px;
      background-color: #f5f5f5;
    }
  
    .ql-editor.ql-blank {
      box-sizing: border-box;
      height: 100%;
      background-color: #f5f5f5;
      border: 0 !important;
    }
  
    #editor {
      height: 20vh !important;
    }
  
    .btn.btn-primary.canel-post {
      background-color: transparent !important;
      border: 1px solid red;
      color: red;
      padding: 6px 20px;
    }
  
    .btn.btn-primary.publish-post {
      background-color: #280a66 !important;
      border: 1px solid #280a66;
      padding: 6px 20px;
    }
  
    .btn.btn-primary.save-draft {
      background-color: #fff !important;
      color: #280a66 !important;
      border: 1px solid #280a66;
      padding: 6px 20px;
    }
  
    .btn.btn-primary.canel-post,
    .btn.btn-primary.save-draft,
    .btn.btn-primary.publish-post {
      margin-left: 15px;
    }
  
    /*------------------------------------------------------
      MODAL STYLE
      ----------------------------------------------------*/
    .no-border {
      border: none;
    }
  
    .modal-content {
      border-radius: 0.7rem;
    }
  
    .modal-header .close {
      opacity: 1;
    }
  
    .cancel-modal-text {
      font-size: 1.1rem;
      margin-bottom: 0;
      margin-top: 1.2rem;
    }
  
    @media screen and (max-width: 767px) {
      .dialog-img {
        width: 170px;
      }
    }
  
    @media screen and (min-width: 768px) {
      .modal-content {
        left: initial;
      }
    }
  </style>
  <div id="content">
    <!-- Main content Area -->
    <div class="container main-body">
      <!-- Page body goes here -->
      <div class="row">
        
  
        <div class="col-lg-11 col-md-11 col-sm-12 col-xs-12 body-of-blog mt-5 p-3">
          <!-- SleekX's code goes here.. -->
          <div class="row">
            <div class="col-12">
              <h4>{{ title }}</h4>
              <hr />
            </div>
          </div>
          <!-- The editor code goes here -->
          <div class="row editor-row">
            <div class="col-12">
              <!-- The editor code goes here -->
              <div id="form-container">
                <form method="POST" class="timeline-editor" id="editor-form">
                  <!-- Quill editor code goes here -->
                  <div class="row">
                    <div class="col-12">
                      <div class="row form-group">
                        <div class="col-12 py-3">
                          <label for="new-post-title" class="sr-only">Title</label>
                          <input type="text" name="title" id="new-post-title" class="form-control" placeholder="Title"
                            required value="{{ post[1].title }}"/>
                        </div>
                        <div class="col-12 py-3">
                          <label for="new-post-tags">Post tags</label>
                          <select multiple class="form-control" id="new-post-tags">
                            <option value="#politics">politics</option>
                            <option value="#sports">sports</option>
                            <option value="#food-health">food/health</option>
                            <option value="#travel">travel</option>
                            <option value="#technology">technology</option>
                            <option value="#music">music</option>
                            <option value="#news-lifestyle">news/lifestyle</option>
                            <option value="#fitness">fitness</option>
                            <option value="#movies">movies</option>
                            <option value="#culture">culture</option>
                          </select>
                        </div>
                        <div class="col-12">
                          <div id="editor">{{ post.body|raw }}</div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-12 text-right" id="current">0</div>
                  <div class="row">
                    <div class="col-12 d-flex flex-row-reverse">
                      <input type="submit" class="btn btn-primary publish-post" value="Publish" />
                      <input type="button" class="btn btn-primary save-draft" value="Save Draft" />
                      <input type="reset" class="btn btn-primary canel-post" value="Cancel" />
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- modal begins here -->
    <div id="cancelModal" class="modal fade" role="dialog">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content no-border">
          <div class="modal-header no-border">
            <button type="button" class="close" data-dismiss="modal">
              &times;
            </button>
          </div>
          <div class="modal-body no-border">
            <img src="/resources/themes/ghost/assets/img/cancel-post-modal.png"
              class="img-fluid mx-auto d-block dialog-img" alt="cancel post image" />
            <p class="cancel-modal-text text-center font-weight-bold">
              Do you want to delete this post?
            </p>
          </div>
          <div class="modal-footer no-border mx-auto d-block">
            <button class="btn btn-primary canel-post">Delete</button>
            <button class="btn btn-primary publish-post">Save as Draft</button>
          </div>
        </div>
      </div>
    </div>
  
    <!--
    This produces the dark area when the side bar is activated.. Don't touch
  -->
    <div class="overlay"></div>
  </div>
  <script>
    const title = document.querySelector("#new-post-title");
    const post = document.querySelector("#editor");
    const current = document.querySelector("#current");
    //console.log(post.innerHTML.length);
    //title.style.display = "none";
    const work = () => {
      let totalText = post.innerText.length;
      if (totalText > 100) {
        title.style.display = "block";
        title.value = '{{ post.title|striptags }}';
        current.style.color = "red";
      } else {
        title.style.display = "none";
        current.style.color = "black";
      }
      return (current.textContent = totalText);
    };
    post.addEventListener("keyup", work);

    window.onload=function()
    {
      work();
    }
  
  </script>
  <div class="overlay"></div>
  </div>
  </div>
  </div>
  {% endblock page_content %}